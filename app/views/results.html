<div class="results-page-container">
  <div class="container">
    <md-tabs class="tabs" md-dynamic-height>
      <md-tab label="Records" analytics-on="click" analytics-event="Viewed club records">
        <div class="itc-h5">Cross Country</div>
        <div class="table record-table">
          <div class="table-header" layout="row">
            <div class="right" flex="40">Men</div>
            <div class="center" flex="20">Event</div>
            <div class="left" flex="40">Women</div>
          </div>
          <md-divider></md-divider>
          <div layout="row" layout-align="space-around">
            <md-progress-circular class="spinner" md-mode="indeterminate" md-diameter="40px" ng-show="isLoadingRec"></md-progress-circular>
          </div>
          <div class="table-row" layout="row" layout-padding ng-repeat-start="performanceList in records['XC']">
            <div class="right" flex="30" flex-xs="20" ng-if="!performanceList.record.maleRecord">Event not contested</div>
            <div class="right" flex="10" flex-xs="20" ng-if="!performanceList.record.maleRecord"></div>
            <div class="right" flex="30" flex-xs="20" ng-if="performanceList.record.maleRecord"><span class="name" ng-repeat="athleteName in performanceList.record.maleRecord[0].athlete | relayNames">{{ ::athleteName }}</span></div>
            <div class="right center-xs" flex="10" flex-xs="20" ng-if="performanceList.record.maleRecord"><span class="record-time">{{ ::performanceList.record.maleRecord[0].performance | xcTime }}</span></div>
            <div class="center" flex="20">{{ ::performanceList.name }}</div>
            <div class="right" flex="10" flex-xs="20" ng-if="!performanceList.record.femaleRecord"></div>
            <div class="left" flex="30" flex-xs="20" ng-if="!performanceList.record.femaleRecord">Event not contested</div>
            <div class="left center-xs" flex="10" flex-xs="20" ng-if="performanceList.record.femaleRecord"><span class="record-time">{{ ::performanceList.record.femaleRecord[0].performance | xcTime }}</span></div>
            <div class="left" flex="30" flex-xs="20" ng-if="performanceList.record.femaleRecord"><span class="name" ng-repeat="athleteName in performanceList.record.femaleRecord[0].athlete | relayNames">{{ ::athleteName }}</span></div>
          </div>
          <md-divider ng-if="!$last" ng-repeat-end></md-divider>
        </div>

        <div class="itc-h5">Indoor Track</div>
        <div class="table record-table">
          <div class="table-header" layout="row">
            <div class="right" flex="40">Men</div>
            <div class="center" flex="20">Event</div>
            <div class="left" flex="40">Women</div>
          </div>
          <md-divider></md-divider>
          <div layout="row" layout-align="space-around">
            <md-progress-circular class="spinner" md-mode="indeterminate" md-diameter="40px" ng-show="isLoadingRec"></md-progress-circular>
          </div>
          <div class="table-row" layout="row" layout-padding ng-repeat-start="performanceList in records['Indoor']">
            <div class="right" flex="30" flex-xs="20" ng-if="!performanceList.record.maleRecord">Event not contested</div>
            <div class="right" flex="10" flex-xs="20" ng-if="!performanceList.record.maleRecord"></div>
            <div class="right" flex="30" flex-xs="20" ng-if="performanceList.record.maleRecord"><span class="name" ng-repeat="athleteName in performanceList.record.maleRecord[0].athlete | relayNames">{{ ::athleteName }}</span></div>
            <div class="right center-xs" flex="10" flex-xs="20" ng-if="performanceList.record.maleRecord"><span class="record-time">{{ ::performanceList.record.maleRecord[0].performance | trackTime }}</span></div>
            <div class="center" flex="20">{{ ::performanceList.name }}</div>
            <div class="right" flex="10" flex-xs="20" ng-if="!performanceList.record.femaleRecord"></div>
            <div class="left" flex="30" flex-xs="20" ng-if="!performanceList.record.femaleRecord">Event not contested</div>
            <div class="left center-xs" flex="10" flex-xs="20" ng-if="performanceList.record.femaleRecord"><span class="record-time">{{ ::performanceList.record.femaleRecord[0].performance | trackTime }}</span></div>
            <div class="left" flex="30" flex-xs="20" ng-if="performanceList.record.femaleRecord"><span class="name" ng-repeat="athleteName in performanceList.record.femaleRecord[0].athlete | relayNames">{{ ::athleteName }}</span></div>
          </div>
          <md-divider ng-if="!$last" ng-repeat-end></md-divider>
        </div>

        <div class="itc-h5">Outdoor Track</div>
        <div class="table record-table">
          <div class="table-header" layout="row">
            <div class="right" flex="40">Men</div>
            <div class="center" flex="20">Event</div>
            <div class="left" flex="40">Women</div>
          </div>
          <md-divider></md-divider>
          <div layout="row" layout-align="space-around">
            <md-progress-circular class="spinner" md-mode="indeterminate" md-diameter="40px" ng-show="isLoadingRec"></md-progress-circular>
          </div>
          <div class="table-row" layout="row" layout-padding ng-repeat-start="performanceList in records['Outdoor']">
            <div class="right" flex="30" flex-xs="20" ng-if="!performanceList.record.maleRecord">Event not contested</div>
            <div class="right" flex="10" flex-xs="20" ng-if="!performanceList.record.maleRecord"></div>
            <div class="right" flex="30" flex-xs="20" ng-if="performanceList.record.maleRecord"><span class="name" ng-repeat="athleteName in performanceList.record.maleRecord[0].athlete | relayNames">{{ ::athleteName }}</span></div>
            <div class="right center-xs" flex="10" flex-xs="20" ng-if="performanceList.record.maleRecord"><span class="record-time">{{ ::performanceList.record.maleRecord[0].performance | trackTime }}</span></div>
            <div class="center" flex="20">{{ ::performanceList.name }}</div>
            <div class="right" flex="10" flex-xs="20" ng-if="!performanceList.record.femaleRecord"></div>
            <div class="left" flex="30" flex-xs="20" ng-if="!performanceList.record.femaleRecord">Event not contested</div>
            <div class="left center-xs" flex="10" flex-xs="20" ng-if="performanceList.record.femaleRecord"><span class="record-time">{{ ::performanceList.record.femaleRecord[0].performance | trackTime }}</span></div>
            <div class="left" flex="30" flex-xs="20" ng-if="performanceList.record.femaleRecord"><span class="name" ng-repeat="athleteName in performanceList.record.femaleRecord[0].athlete | relayNames">{{ ::athleteName }}</span></div>
          </div>
          <md-divider ng-if="!$last" ng-repeat-end></md-divider>
      </md-tab>
      <md-tab label="Top Performances">
        <md-tabs class="tabs" md-dynamic-height>
          <md-tab label="Cross Country">
              <div layout="row" layout-align="space-around">
                <md-progress-circular class="spinner" md-mode="indeterminate" md-diameter="40px" ng-show="isLoadingTP"></md-progress-circular>
              </div>
            <div class="top-performance-table" ng-repeat="performanceList in topPerformances['XC']">
              <div class="itc-h5">{{ ::performanceList.name }}</div>
              <div class="left-table">
                <div class="table">
                  <div class="table-header" layout="row">
                    <div flex="100">Men</div>
                  </div>
                  <md-divider></md-divider>
                  <div class="table-row" layout="row" ng-if="!performanceList.performances.maleRecords">
                    <div flex="100">Event not contested</div>
                  </div>
                  <div class="table-row" layout="row" ng-if="performanceList.performances.maleRecords" ng-repeat-start="performance in performanceList.performances.maleRecords">
                    <div class="athlete-names" flex="70"><span class="name" ng-repeat="athleteName in performance.athlete | relayNames">{{ ::athleteName }}</span></div>
                    <div class="record-time right" flex="30"><span class="record-span">{{ ::performance.performance | xcTime }}</span></div>
                  </div>
                  <md-divider ng-repeat-end></md-divider>
                </div>
              </div>
              <div class="right-table">
                <div class="table">
                  <div class="table-header" layout="row">
                    <div flex="100">Women</div>
                  </div>
                  <md-divider></md-divider>
                  <div class="table-row" layout="row" ng-if="!performanceList.performances.femaleRecords">
                    <div flex="100">Event not contested</div>
                  </div>
                  <div class="table-row" layout="row" ng-if="performanceList.performances.femaleRecords" ng-repeat-start="performance in performanceList.performances.femaleRecords">
                    <div class="athlete-names" flex="70"><span class="name" ng-repeat="athleteName in performance.athlete | relayNames">{{ ::athleteName }}</span></div>
                    <div class="record-time right" flex="30"><span class="record-span">{{ ::performance.performance | xcTime }}</span></div>
                  </div>
                  <md-divider ng-repeat-end></md-divider>
                </div>
              </div>
            </div>
          </md-tab>
          <md-tab label="Indoor Track">
            <div layout="row" layout-align="space-around">
                <md-progress-circular class="spinner" md-mode="indeterminate" md-diameter="40px" ng-show="isLoadingTP"></md-progress-circular>
              </div>
            <div class="top-performance-table" ng-repeat="performanceList in topPerformances['Indoor']">
              <div class="itc-h5">{{ ::performanceList.name }}</div>
              <div class="left-table">
                <div class="table">
                  <div class="table-header" layout="row">
                    <div flex="100">Men</div>
                  </div>
                  <md-divider></md-divider>
                  <div class="table-row" layout="row" ng-if="!performanceList.performances.maleRecords">
                    <div flex="100">Event not contested</div>
                  </div>
                  <div class="table-row" layout="row" ng-if="performanceList.performances.maleRecords" ng-repeat-start="performance in performanceList.performances.maleRecords">
                    <div class="athlete-names" flex="70"><span class="name" ng-repeat="athleteName in performance.athlete | relayNames">{{ ::athleteName }}</span></div>
                    <div class="record-time right" flex="30"><span class="record-span">{{ ::performance.performance | trackTime }}</span></div>
                  </div>
                  <md-divider ng-repeat-end></md-divider>
                </div>
              </div>
              <div class="right-table">
                <div class="table">
                  <div class="table-header" layout="row">
                    <div flex="100">Women</div>
                  </div>
                  <md-divider></md-divider>
                  <div class="table-row" layout="row" ng-if="!performanceList.performances.femaleRecords">
                    <div flex="100">Event not contested</div>
                  </div>
                  <div class="table-row" layout="row" ng-if="performanceList.performances.femaleRecords" ng-repeat-start="performance in performanceList.performances.femaleRecords">
                    <div class="athlete-names" flex="70"><span class="name" ng-repeat="athleteName in performance.athlete | relayNames">{{ ::athleteName }}</span></div>
                    <div class="record-time right" flex="30"><span class="record-span">{{ ::performance.performance | trackTime }}</span></div>
                  </div>
                  <md-divider ng-repeat-end></md-divider>
                </div>
              </div>
            </div>
          </md-tab>
          <md-tab label="Outdoor Track">
            <div layout="row" layout-align="space-around">
                <md-progress-circular class="spinner" md-mode="indeterminate" md-diameter="40px" ng-show="isLoadingTP"></md-progress-circular>
            </div>
            <div class="top-performance-table" ng-repeat="performanceList in topPerformances['Outdoor']">
              <div class="itc-h5">{{ ::performanceList.name }}</div>
              <div class="left-table">
                <div class="table">
                  <div class="table-header" layout="row">
                    <div flex="100">Men</div>
                  </div>
                  <md-divider></md-divider>
                  <div class="table-row" layout="row" ng-if="!performanceList.performances.maleRecords">
                    <div flex="100">Event not contested</div>
                  </div>
                  <div class="table-row" layout="row" ng-if="performanceList.performances.maleRecords" ng-repeat-start="performance in performanceList.performances.maleRecords">
                    <div class="athlete-names" flex="70"><span class="name" ng-repeat="athleteName in performance.athlete | relayNames">{{ ::athleteName }}</span></div>
                    <div class="record-time right" flex="30"><span class="record-span">{{ ::performance.performance | trackTime }}</span></div>
                  </div>
                  <md-divider ng-repeat-end></md-divider>
                </div>
              </div>
              <div class="right-table">
                <div class="table">
                  <div class="table-header" layout="row">
                    <div flex="100">Women</div>
                  </div>
                  <md-divider></md-divider>
                  <div class="table-row" layout="row" ng-if="!performanceList.performances.femaleRecords">
                    <div flex="100">Event not contested</div>
                  </div>
                  <div class="table-row" layout="row" ng-if="performanceList.performances.femaleRecords" ng-repeat-start="performance in performanceList.performances.femaleRecords">
                    <div class="athlete-names" flex="70"><span class="name" ng-repeat="athleteName in performance.athlete | relayNames">{{ ::athleteName }}</span></div>
                    <div class="record-time right" flex="30"><span class="record-span">{{ ::performance.performance | trackTime }}</span></div>
                  </div>
                  <md-divider ng-repeat-end></md-divider>
                </div>
              </div>
            </div>
          </md-tab>
        </md-tabs>
      </md-tab>
      <md-tab label="Meet Results" analytics-on="click" analytics-event="Viewed meet results">
        <md-tabs class="tabs" md-dynamic-height analytics-on="click" analytics-event="Viewed XC track meets">
          <md-tab label="Cross Country">
            <span ng-repeat="meets in crossCountryMeets | orderObjectBy:date:true">
              <div class="table meet-table">
                <div class="table-header" layout="row">
                  <div flex="100">{{ meets[0].date.substring(0,4) }}</div>
                </div>
                <div class="table-row" layout="row" ng-repeat-start="meet in meets">
                  <div flex="70">{{ meet.name }}</div>
                  <div class="right" flex="30">
                    <a class="link results" ng-if="meet.resultURL" href="{{ meet.resultURL }}">Results</a>
                    <a class="link splits" ng-if="meet.splitURL" href="{{ meet.splitURL }}">Splits</a>
                  </div>
                </div>
                <md-divider ng-repeat-end></md-divider>
              </div>
            </span>
          </md-tab>
          <md-tab label="Indoor Track" analytics-on="click" analytics-event="Viewed indoor track meets">
            <span ng-repeat="meets in indoorMeets | orderObjectBy:date:true">
              <div class="table meet-table">
                <div class="table-header" layout="row">
                  <div flex="100">{{ meets[0].date.substring(0,4) }}</div>
                </div>
                <div class="table-row" layout="row" ng-repeat-start="meet in meets">
                  <div flex="70">{{ meet.name }}</div>
                  <div class="right" flex="30">
                    <a class="link results" ng-if="meet.resultURL" href="{{ meet.resultURL }}">Results</a>
                    <a class="link splits" ng-if="meet.splitURL" href="{{ meet.splitURL }}">Splits</a>
                  </div>
                </div>
                <md-divider ng-repeat-end></md-divider>
              </div>
            </span>
          </md-tab>
          <md-tab label="Outdoor Track" analytics-on="click" analytics-event="Viewed outdoor track meets">
          <span ng-repeat="meets in outdoorMeets | orderObjectBy:date:true">
              <div class="table meet-table">
                <div class="table-header" layout="row">
                  <div flex="100">{{ meets[0].date.substring(0,4) }}</div>
                </div>
                <div class="table-row" layout="row" ng-repeat-start="meet in meets">
                  <div flex="70">{{ meet.name }}</div>
                  <div class="right" flex="30">
                    <a class="link results" ng-if="meet.resultURL" href="{{ meet.resultURL }}">Results</a>
                    <a class="link splits" ng-if="meet.splitURL" href="{{ meet.splitURL }}">Splits</a>
                  </div>
                </div>
                <md-divider ng-repeat-end></md-divider>
              </div>
            </span>
          </md-tab>
        </md-tabs>
      </md-tab>
      <md-tab label="Athlete Search" md-on-select="loadAthletes()" analytics-on="click" analytics-event="Opened athlete search">
        <div class="extra-vertical-space">
          <md-autocomplete
            md-items="athlete in loadAthletes()"
            md-item-text="athlete.name"
            md-search-text="athleteText"
            md-delay="500"
            placeholder="Search for an athlete profile"
            md-selected-item="selectedAthlete"
            class="searchbar"
          >
            <md-item-template>
              <span md-highlight-text="athleteText" analytics-on="click" analytics-event="Opened athlete profile for {{ athlete.name }}">{{ athlete.name }}</span>
            </md-item-template>
            <md-not-found>
            No matches found.
          </md-not-found>
          </md-autocomplete>
        </div>
        <div>
          <div ng-repeat="(season, seasons) in selectedAthlete.results | results" >
            <div class="itc-h5" ng-if="seasons">{{ season }}</div>
            <div class="table" ng-repeat="(event, results) in seasons">
              <div class="table-header" layout="row">
                <div>{{ event }}</div>
              </div>
              <md-divider></md-divider>
              <div class="table-row" layout="row" ng-repeat-start="result in results">
                <div class="left" flex="70">{{ result.meet.date | date : 'yyyy' }} {{ result.meet.name }}</div>
                <div class="record-time right" flex="30" ng-if="result.event.season == 'XC'">{{ result.performance | xcTime }}</div>
                <div class="record-time right" flex="30" ng-if="result.event.season !== 'XC'">
                  <span ng-if="result.distanceResult">{{ result.performance | trackDist }}</span>
                  <span ng-if="!result.distanceResult">{{ result.performance | trackTime }}</span>
                </div>
              </div>
              <md-divider ng-repeat-end></md-divider>
            </div>
          </div>
        </div>
      </md-tab>
    </md-tabs>
  </div>
</div>
